!function(t,e,i){"use strict";!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(t.jQuery)}(function($){function o(t,e){return this.$element=$(t),e&&("string"!==$.type(e.delay)&&"number"!==$.type(e.delay)||(e.delay={show:e.delay,hide:e.delay})),this.options=$.extend({},r,e),this._defaults=r,this._name=n,this._targetclick=!1,this.init(),l.push(this.$element),this}var n="webuiPopover",s="webui-popover",h="webui.popover",r={placement:"auto",container:null,id_:null,width:"auto",height:"auto",trigger:"click",style:"",selector:!1,delay:{show:null,hide:300},async:{type:"GET",before:null,success:null,error:null},cache:!0,multi:!1,arrow:!0,title:"",content:"",closeable:!1,padding:!0,url:"",type:"html",direction:"",animation:null,template:'<div class="webui-popover"><div class="webui-arrow"></div><div class="webui-popover-inner"><a href="#" class="close"></a><h3 class="webui-popover-title"></h3><div class="webui-popover-content"><i class="icon-refresh"></i> <p>&nbsp;</p></div></div></div>',backdrop:!1,dismissible:!0,onShow:null,onHide:null,abortXHR:!0,autoHide:!1,offsetTop:0,offsetLeft:0,iframeOptions:{frameborder:"0",allowtransparency:"true",id:"",name:"",scrolling:"",onload:"",height:"",width:""},hideEmpty:!1},a=s+"-rtl",l=[],p=$('<div class="webui-popover-backdrop"></div>'),c=0,f=!1,d=-2e3,u=$(e),g=function(t,e){return isNaN(t)?e||0:Number(t)},m=function(t){return t.data("plugin_"+n)},v=function(){for(var t=null,e=0;e<l.length;e++)t=m(l[e]),t&&t.hide(!0);u.trigger("hiddenAll."+h)},y=function(t){for(var e=null,i=0;i<l.length;i++)e=m(l[i]),e&&e.id!==t.id&&e.hide(!0);u.trigger("hiddenAll."+h)},w="ontouchstart"in e.documentElement&&/Mobi/.test(navigator.userAgent),b=function(t){var e={x:0,y:0};if("touchstart"===t.type||"touchmove"===t.type||"touchend"===t.type||"touchcancel"===t.type){var i=t.originalEvent.touches[0]||t.originalEvent.changedTouches[0];e.x=i.pageX,e.y=i.pageY}else"mousedown"!==t.type&&"mouseup"!==t.type&&"click"!==t.type||(e.x=t.pageX,e.y=t.pageY);return e};o.prototype={init:function(){if(this.$element[0]instanceof e.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");"manual"!==this.getTrigger()&&("click"===this.getTrigger()||w?this.$element.off("click touchend",this.options.selector).on("click touchend",this.options.selector,$.proxy(this.toggle,this)):"hover"===this.getTrigger()&&this.$element.off("mouseenter mouseleave click",this.options.selector).on("mouseenter",this.options.selector,$.proxy(this.mouseenterHandler,this)).on("mouseleave",this.options.selector,$.proxy(this.mouseleaveHandler,this))),this._poped=!1,this._inited=!0,this._opened=!1,this._idSeed=c,this.id=n+this._idSeed,this.options.container=$(this.options.container||e.body).first(),this.options.backdrop&&p.appendTo(this.options.container).hide(),c++,"sticky"===this.getTrigger()&&this.show(),this.options.selector&&(this._options=$.extend({},this.options,{selector:""}))},destroy:function(){for(var t=-1,e=0;e<l.length;e++)if(l[e]===this.$element){t=e;break}l.splice(t,1),this.hide(),this.$element.data("plugin_"+n,null),"click"===this.getTrigger()?this.$element.off("click"):"hover"===this.getTrigger()&&this.$element.off("mouseenter mouseleave"),this.$target&&this.$target.remove()},getDelegateOptions:function(){var t={};return this._options&&$.each(this._options,function(e,i){r[e]!==i&&(t[e]=i)}),t},hide:function(t,e){if((t||"sticky"!==this.getTrigger())&&this._opened){e&&(e.preventDefault(),e.stopPropagation()),this.xhr&&this.options.abortXHR===!0&&(this.xhr.abort(),this.xhr=null);var i=$.Event("hide."+h);if(this.$element.trigger(i,[this.$target]),this.$target){this.$target.removeClass("in").addClass(this.getHideAnimation());var o=this;setTimeout(function(){o.$target.hide(),o.getCache()||o.$target.remove()},o.getHideDelay())}this.options.backdrop&&p.hide(),this._opened=!1,this.$element.trigger("hidden."+h,[this.$target]),this.options.onHide&&this.options.onHide(this.$target)}},resetAutoHide:function(){var t=this,e=t.getAutoHide();e&&(t.autoHideHandler&&clearTimeout(t.autoHideHandler),t.autoHideHandler=setTimeout(function(){t.hide()},e))},delegate:function(t){var e=$(t).data("plugin_"+n);return e||(e=new o(t,this.getDelegateOptions()),$(t).data("plugin_"+n,e)),e},toggle:function(t){var e=this;t&&(t.preventDefault(),t.stopPropagation(),this.options.selector&&(e=this.delegate(t.currentTarget))),e[e.getTarget().hasClass("in")?"hide":"show"]()},hideAll:function(){v()},hideOthers:function(){y(this)},show:function(){if(!($(".empty-basket").is(":visible")&&"basket"==this.options.id_||this._opened)){var t=this.getTarget().removeClass().addClass(s).addClass(this._customTargetClass);if(this.options.multi||this.hideOthers(),!this.getCache()||!this._poped||""===this.content){if(this.content="",this.setTitle(this.getTitle()),this.options.closeable||t.find(".close").off("click").remove(),this.isAsync()?this.setContentASync(this.options.content):this.setContent(this.getContent()),this.canEmptyHide()&&""===this.content)return;t.show()}this.displayContent(),this.options.onShow&&this.options.onShow(t),this.bindBodyEvents(),this.options.backdrop&&p.show(),this._opened=!0,this.resetAutoHide()}},displayContent:function(){var t=this.getElementPosition(),e=this.getTarget().removeClass().addClass(s).addClass(this._customTargetClass),i=this.getContentElement(),o=e[0].offsetWidth,n=e[0].offsetHeight,r="bottom",l=$.Event("show."+h);if(this.canEmptyHide()){var p=i.children().html();if(null!==p&&0===p.trim().length)return}this.$element.trigger(l,[e]);var c=this.$element.data("width")||this.options.width;""===c&&(c=this._defaults.width),"auto"!==c&&e.width(c);var f=this.$element.data("height")||this.options.height;""===f&&(f=this._defaults.height),"auto"!==f&&i.height(f),this.options.style&&this.$target.addClass(s+"-"+this.options.style),"rtl"!==this.options.direction||i.hasClass(a)||i.addClass(a),this.options.arrow||e.find(".webui-arrow").remove(),e.detach().css({top:d,left:d,display:"block"}),this.getAnimation()&&e.addClass(this.getAnimation()),e.appendTo(this.options.container),r=this.getPlacement(t),this.$element.trigger("added."+h),this.initTargetEvents(),this.options.padding||("auto"!==this.options.height&&i.css("height",i.outerHeight()),this.$target.addClass("webui-no-padding")),this.options.maxHeight&&i.css("maxHeight",this.options.maxHeight),this.options.maxWidth&&i.css("maxWidth",this.options.maxWidth),o=e[0].offsetWidth,n=e[0].offsetHeight;var u=this.getTargetPositin(t,r,o,n);if(this.$target.css(u.position).addClass(r).addClass("in"),"iframe"===this.options.type){var g=e.find("iframe"),m=e.width(),v=g.parent().height();""!==this.options.iframeOptions.width&&"auto"!==this.options.iframeOptions.width&&(m=this.options.iframeOptions.width),""!==this.options.iframeOptions.height&&"auto"!==this.options.iframeOptions.height&&(v=this.options.iframeOptions.height),g.width(m).height(v)}if(this.options.arrow||this.$target.css({margin:0}),this.options.arrow){var y=this.$target.find(".webui-arrow");y.removeAttr("style"),"left"===r||"right"===r?y.css({top:this.$target.height()/2}):"top"!==r&&"bottom"!==r||y.css({left:this.$target.width()/2}),u.arrowOffset&&(u.arrowOffset.left===-1||u.arrowOffset.top===-1?y.hide():y.css(u.arrowOffset))}this._poped=!0,this.$element.trigger("shown."+h,[this.$target])},isTargetLoaded:function(){return 0===this.getTarget().find("i.glyphicon-refresh").length},getTriggerElement:function(){return this.$element},getTarget:function(){if(!this.$target){var t="popover-"+this.options.id_;this.$target=$(this.options.template).attr("id",t),this._customTargetClass=this.$target.attr("class")!==s?this.$target.attr("class"):null,this.getTriggerElement().attr("data-target",t)}return this.$target.data("trigger-element")||this.$target.data("trigger-element",this.getTriggerElement()),this.$target},removeTarget:function(){this.$target.remove(),this.$target=null,this.$contentElement=null},getTitleElement:function(){return this.getTarget().find("."+s+"-title")},getContentElement:function(){return this.$contentElement||(this.$contentElement=this.getTarget().find("."+s+"-content")),this.$contentElement},getTitle:function(){return this.$element.attr("data-title")||this.options.title||this.$element.attr("title")},getUrl:function(){return this.$element.attr("data-url")||this.options.url},getAutoHide:function(){return this.$element.attr("data-auto-hide")||this.options.autoHide},getOffsetTop:function(){return g(this.$element.attr("data-offset-top"))||this.options.offsetTop},getOffsetLeft:function(){return g(this.$element.attr("data-offset-left"))||this.options.offsetLeft},getCache:function(){var t=this.$element.attr("data-cache");if("undefined"!=typeof t)switch(t.toLowerCase()){case"true":case"yes":case"1":return!0;case"false":case"no":case"0":return!1}return this.options.cache},getTrigger:function(){return this.$element.attr("data-trigger")||this.options.trigger},getDelayShow:function(){var t=this.$element.attr("data-delay-show");return"undefined"!=typeof t?t:0===this.options.delay.show?0:this.options.delay.show||100},getHideDelay:function(){var t=this.$element.attr("data-delay-hide");return"undefined"!=typeof t?t:0===this.options.delay.hide?0:this.options.delay.hide||100},getAnimation:function(){var t=this.$element.attr("data-animation");return t||this.options.animation},getHideAnimation:function(){var t=this.getAnimation();return t?t+"-out":"out"},setTitle:function(t){var e=this.getTitleElement();t?("rtl"!==this.options.direction||e.hasClass(a)||e.addClass(a),e.html(t)):e.remove()},hasContent:function(){return this.getContent()},canEmptyHide:function(){return this.options.hideEmpty&&"html"===this.options.type},getIframe:function(){var t=$("<iframe></iframe>").attr("src",this.getUrl()),e=this;return $.each(this._defaults.iframeOptions,function(i){"undefined"!=typeof e.options.iframeOptions[i]&&t.attr(i,e.options.iframeOptions[i])}),t},getContent:function(){if(this.getUrl())switch(this.options.type){case"iframe":this.content=this.getIframe();break;case"html":try{this.content=$(this.getUrl()),this.content.is(":visible")||this.content.show()}catch(t){throw new Error("Unable to get popover content. Invalid selector specified.")}}else if(!this.content){var t="";if(t=$.isFunction(this.options.content)?this.options.content.apply(this.$element[0],[this]):this.options.content,this.content=this.$element.attr("data-content")||t,!this.content){var e=this.$element.next();e&&e.hasClass(s+"-content")&&(this.content=e)}}return this.content},setContent:function(t){var e=this.getTarget(),i=this.getContentElement();"string"==typeof t?i.html(t):t instanceof $&&(i.html(""),this.options.cache?t.removeClass(s+"-content").appendTo(i):t.clone(!0,!0).removeClass(s+"-content").appendTo(i)),this.$target=e},isAsync:function(){return"async"===this.options.type},setContentASync:function(t){var e=this;this.xhr||(this.xhr=$.ajax({url:this.getUrl(),type:this.options.async.type,cache:this.getCache(),beforeSend:function(t){e.options.async.before&&e.options.async.before(e,t)},success:function(i){e.bindBodyEvents(),t&&$.isFunction(t)?e.content=t.apply(e.$element[0],[i]):e.content=i,e.setContent(e.content);var o=e.getContentElement();o.removeAttr("style"),e.displayContent(),e.options.async.success&&e.options.async.success(e,i)},complete:function(){e.xhr=null},error:function(t,i){e.options.async.error&&e.options.async.error(e,t,i)}}))},bindBodyEvents:function(){f||(this.options.dismissible&&"click"===this.getTrigger()?(u.off("keyup.webui-popover").on("keyup.webui-popover",$.proxy(this.escapeHandler,this)),u.off("click.webui-popover touchend.webui-popover").on("click.webui-popover touchend.webui-popover",$.proxy(this.bodyClickHandler,this))):"hover"===this.getTrigger()&&u.off("touchend.webui-popover").on("touchend.webui-popover",$.proxy(this.bodyClickHandler,this)))},mouseenterHandler:function(t){var e=this;t&&this.options.selector&&(e=this.delegate(t.currentTarget)),e._timeout&&clearTimeout(e._timeout),e._enterTimeout=setTimeout(function(){e.getTarget().is(":visible")||e.show()},this.getDelayShow())},mouseleaveHandler:function(){var t=this;clearTimeout(t._enterTimeout),t._timeout=setTimeout(function(){t.hide()},this.getHideDelay())},escapeHandler:function(t){27===t.keyCode&&this.hideAll()},bodyClickHandler:function(t){f=!0;for(var e=!0,i=0;i<l.length;i++){var o=m(l[i]);if(o&&o._opened){var n=o.getTarget().offset(),s=n.left,h=n.top,r=n.left+o.getTarget().width(),a=n.top+o.getTarget().height(),p=b(t),c=p.x>=s&&p.x<=r&&p.y>=h&&p.y<=a;if(c){e=!1;break}}}e&&v()},initTargetEvents:function(){"hover"===this.getTrigger()&&this.$target.off("mouseenter mouseleave").on("mouseenter",$.proxy(this.mouseenterHandler,this)).on("mouseleave",$.proxy(this.mouseleaveHandler,this)),this.$target.find(".close").off("click").on("click",$.proxy(this.hide,this,!0))},getPlacement:function(t){var e,i=this.options.container,o=i.innerWidth(),n=i.innerHeight(),s=i.scrollTop(),h=i.scrollLeft(),r=Math.max(0,t.left-h),a=Math.max(0,t.top-s);e="function"==typeof this.options.placement?this.options.placement.call(this,this.getTarget()[0],this.$element[0]):this.$element.data("placement")||this.options.placement;var l="horizontal"===e,p="vertical"===e,c="auto"===e||l||p;return c?e=r<o/3?a<n/3?l?"right-bottom":"bottom-right":a<2*n/3?p?a<=n/2?"bottom-right":"top-right":"right":l?"right-top":"top-right":r<2*o/3?a<n/3?l?r<=o/2?"right-bottom":"left-bottom":"bottom":a<2*n/3?l?r<=o/2?"right":"left":a<=n/2?"bottom":"top":l?r<=o/2?"right-top":"left-top":"top":a<n/3?l?"left-bottom":"bottom-left":a<2*n/3?p?a<=n/2?"bottom-left":"top-left":"left":l?"left-top":"top-left":"auto-top"===e?e=r<o/3?"top-right":r<2*o/3?"top":"top-left":"auto-bottom"===e?e=r<o/3?"bottom-right":r<2*o/3?"bottom":"bottom-left":"auto-left"===e?e=a<n/3?"left-top":a<2*n/3?"left":"left-bottom":"auto-right"===e&&(e=a<n/3?"right-bottom":a<2*n/3?"right":"right-top"),e},getElementPosition:function(){var t=this.$element[0].getBoundingClientRect(),i=this.options.container,o=i.css("position");if(i.is(e.body)||"static"===o)return $.extend({},this.$element.offset(),{width:this.$element[0].offsetWidth||t.width,height:this.$element[0].offsetHeight||t.height});if("fixed"===o){var n=i[0].getBoundingClientRect();return{top:t.top-n.top+i.scrollTop(),left:t.left-n.left+i.scrollLeft(),width:t.width,height:t.height}}return"relative"===o?{top:this.$element.offset().top-i.offset().top,left:this.$element.offset().left-i.offset().left,width:this.$element[0].offsetWidth||t.width,height:this.$element[0].offsetHeight||t.height}:void 0},getTargetPositin:function(t,i,o,n){var s=t,h=this.options.container,r=this.$element.outerWidth(),a=this.$element.outerHeight(),l=e.documentElement.scrollTop+h.scrollTop(),p=e.documentElement.scrollLeft+h.scrollLeft(),c={},f=null,u=this.options.arrow?20:0,g=10,m=r<u+g?u:0,v=a<u+g?u:0,y=0,w=e.documentElement.clientHeight+l,b=e.documentElement.clientWidth+p,T=s.left+s.width/2-m>0,C=s.left+s.width/2+m<b,H=s.top+s.height/2-v>0,k=s.top+s.height/2+v<w;switch(i){case"bottom":c={top:s.top+s.height,left:s.left+s.width/2-o/2};break;case"top":c={top:s.top-n,left:s.left+s.width/2-o/2};break;case"left":c={top:s.top+s.height/2-n/2,left:s.left-o};break;case"right":c={top:s.top+s.height/2-n/2,left:s.left+s.width};break;case"top-right":c={top:s.top-n,left:T?s.left-m:g},f={left:T?Math.min(r,o)/2+m:d};break;case"top-left":y=C?m:-g,c={top:s.top-n,left:s.left-o+s.width+y},f={left:C?o-Math.min(r,o)/2-m:d};break;case"bottom-right":c={top:s.top+s.height,left:T?s.left-m:g},f={left:T?Math.min(r,o)/2+m:d};break;case"bottom-left":y=C?m:-g,c={top:s.top+s.height,left:s.left-o+s.width+y},f={left:C?o-Math.min(r,o)/2-m:d};break;case"right-top":y=k?v:-g,c={top:s.top-n+s.height+y,left:s.left+s.width},f={top:k?n-Math.min(a,n)/2-v:d};break;case"right-bottom":c={top:H?s.top-v:g,left:s.left+s.width},f={top:H?Math.min(a,n)/2+v:d};break;case"left-top":y=k?v:-g,c={top:s.top-n+s.height+y,left:s.left-o},f={top:k?n-Math.min(a,n)/2-v:d};break;case"left-bottom":c={top:H?s.top-v:g,left:s.left-o},f={top:H?Math.min(a,n)/2+v:d}}return c.top+=this.getOffsetTop(),c.left+=this.getOffsetLeft(),{position:c,arrowOffset:f}}},$.fn[n]=function(t,e){var i=[],s=this.each(function(){var s=$.data(this,"plugin_"+n);s?"destroy"===t?s.destroy():"string"==typeof t&&i.push(s[t]()):(t?"string"==typeof t?"destroy"!==t&&(e||(s=new o(this,null),i.push(s[t]()))):"object"==typeof t&&(s=new o(this,t)):s=new o(this,null),$.data(this,"plugin_"+n,s))});return i.length?i:s};var T=function(){var t=function(){v()},e=function(t,e){e=e||{},$(t).webuiPopover(e)},o=function(t){var e=!0;return $(t).each(function(t,o){e=e&&$(o).data("plugin_"+n)!==i}),e},s=function(t,e){e?$(t).webuiPopover(e).webuiPopover("show"):$(t).webuiPopover("show")},h=function(t){$(t).webuiPopover("hide")},a=function(t){r=$.extend({},r,t)},l=function(t,e){var i=$(t).data("plugin_"+n);if(i){var o=i.getCache();i.options.cache=!1,i.options.content=e,i._opened?(i._opened=!1,i.show()):i.isAsync()?i.setContentASync(e):i.setContent(e),i.options.cache=o}},p=function(t,e){var i=$(t).data("plugin_"+n);if(i){var o=i.getCache(),s=i.options.type;i.options.cache=!1,i.options.url=e,i._opened?(i._opened=!1,i.show()):(i.options.type="async",i.setContentASync(i.content)),i.options.cache=o,i.options.type=s}};return{show:s,hide:h,create:e,isCreated:o,hideAll:t,updateContent:l,updateContentAsync:p,setDefaultOptions:a}}();t.WebuiPopovers=T})}(window,document);