!function($){"use strict";$.fn.selectOrDie=function(a){var t={customID:null,customClass:"",placeholder:null,placeholderOption:!1,prefix:null,cycle:!1,stripEmpty:!1,links:!1,linksExternal:!1,size:0,tabIndex:0,onChange:$.noop},e={},s=!1,o,l,d={initSoD:function(a){return e=$.extend({},t,a),this.each(function(){if(!$(this).parent().hasClass("sod_select")){var a=$(this),t=a.data("custom-id")?a.data("custom-id"):e.customID,s=a.data("custom-class")?a.data("custom-class"):e.customClass,o=a.data("prefix")?a.data("prefix"):e.prefix,l=a.data("placeholder")?a.data("placeholder"):e.placeholder,i=a.data("placeholder-option")?a.data("placeholder-option"):e.placeholderOption,n=a.data("cycle")?a.data("cycle"):e.cycle,r=a.data("links")?a.data("links"):e.links,c=a.data("links-external")?a.data("links-external"):e.linksExternal,p=parseInt(a.data("size"))?a.data("size"):e.size,h=parseInt(a.data("tabindex"))?a.data("tabindex"):e.tabIndex?e.tabIndex:a.attr("tabindex")?a.attr("tabindex"):e.tabIndex,u=a.data("strip-empty")?a.data("strip-empty"):e.stripEmpty,f=a.prop("title")?a.prop("title"):null,b=a.is(":disabled")?" disabled":"",C="",v="",m=0,_,g,x;o&&(C='<span class="sod_prefix">'+o+"</span> "),v+=l&&!o?'<span class="sod_label sod_placeholder">'+l+"</span>":'<span class="sod_label">'+C+"</span>",_=$("<span/>",{id:t,class:"sod_select "+s+b,title:f,tabindex:h,html:v,"data-cycle":n,"data-links":r,"data-links-external":c,"data-placeholder":l,"data-placeholder-option":i,"data-prefix":o,"data-filter":""}).insertAfter(this),d.isTouch()&&_.addClass("touch"),g=$("<span/>",{class:"sod_list_wrapper"}).appendTo(_),x=$("<span/>",{class:"sod_list"}).appendTo(g),$("option, optgroup",a).each(function(a){var t=$(this);u&&!$.trim(t.text())?t.remove():0===a&&i&&!C?d.populateSoD(t,x,_,!0):d.populateSoD(t,x,_,!1)}),p&&(g.show(),$(".sod_option:lt("+p+")",x).each(function(){m+=$(this).outerHeight()}),g.removeAttr("style"),x.css({"max-height":m})),a.appendTo(_),_.on("focusin",d.focusSod).on("click",d.triggerSod).on("click",".sod_option",d.optionClick).on("mousemove",".sod_option",d.optionHover).on("keydown",d.keyboardUse),a.on("change",d.selectChange),$(document).on("click","label[for='"+a.attr("id")+"']",function(a){a.preventDefault(),_.focus()})}})},populateSoD:function(a,t,e,s){var o=e.data("placeholder"),l=e.data("placeholder-option"),d=e.data("prefix"),i=e.find(".sod_label"),n=a.parent(),r=a.text(),c=a.val(),p=a.data("custom-id")?a.data("custom-id"):null,h=a.data("custom-class")?a.data("custom-class"):"",u=a.is(":disabled")?" disabled ":"",f=a.is(":selected")?" selected active ":"",b=a.data("link")?" link ":"",C=a.data("link-external")?" linkexternal":"",v=a.prop("label");a.is("option")?($("<span/>",{class:"sod_option "+h+u+f+b+C,id:p,title:r,html:r,"data-value":c}).appendTo(t),s&&!d?(e.data("label",r),e.data("placeholder",r),a.prop("disabled",!0),t.find(".sod_option:last").addClass("is-placeholder disabled"),f&&i.addClass("sod_placeholder")):f&&o&&!l&&!d?e.data("label",o):f&&e.data("label",r),(f&&!o||f&&l||f&&d)&&i.append(r),n.is("optgroup")&&(t.find(".sod_option:last").addClass("groupchild"),n.is(":disabled")&&t.find(".sod_option:last").addClass("disabled"))):$("<span/>",{class:"sod_option optgroup "+u,title:v,html:v,"data-label":v}).appendTo(t)},focusSod:function(){var a=$(this);a.hasClass("disabled")?d.blurSod(a):(d.blurSod($(".sod_select.focus").not(a)),a.addClass("focus"),$("html").on("click.sodBlur",function(){d.blurSod(a)}))},triggerSod:function(a){a.stopPropagation();var t=$(this),e=t.find(".sod_list"),s=t.data("placeholder"),o=t.find(".active"),i=t.find(".selected");t.removeClass("error_"),t.removeClass("error"),t.hasClass("disabled")||t.hasClass("open")||t.hasClass("touch")?(clearTimeout(l),t.removeClass("open"),s&&(t.find(".sod_label").get(0).lastChild.nodeValue=o.text())):(t.addClass("open"),s&&!t.data("prefix")&&t.find(".sod_label").addClass("sod_placeholder").html(s),d.listScroll(e,i),d.checkViewport(t,e))},keyboardUse:function(a){var t=$(this),e=t.find(".sod_list"),l=t.find(".sod_option"),i=t.find(".sod_label"),n=t.data("cycle"),r=l.filter(".active"),c,p,h;return a.which>36&&a.which<41?(37===a.which||38===a.which?(p=r.prevAll(":not('.disabled, .optgroup')").first(),h=l.not(".disabled, .optgroup").last()):39!==a.which&&40!==a.which||(p=r.nextAll(":not('.disabled, .optgroup')").first(),h=l.not(".disabled, .optgroup").first()),!p.hasClass("sod_option")&&n&&(p=h),(p.hasClass("sod_option")||n)&&(r.removeClass("active"),p.addClass("active"),i.get(0).lastChild.nodeValue=p.text(),d.listScroll(e,p),t.hasClass("open")||(s=!0)),!1):(13===a.which||32===a.which&&t.hasClass("open")&&(" "===t.data("filter")[0]||""===t.data("filter"))?(a.preventDefault(),r.click()):32!==a.which||t.hasClass("open")||" "!==t.data("filter")[0]&&""!==t.data("filter")?27===a.which&&d.blurSod(t):(a.preventDefault(),s=!1,t.click()),void(0!==a.which&&(clearTimeout(o),t.data("filter",t.data("filter")+String.fromCharCode(a.which)),c=l.filter(function(){return 0===$(this).text().toLowerCase().indexOf(t.data("filter").toLowerCase())}).not(".disabled, .optgroup").first(),c.length&&(r.removeClass("active"),c.addClass("active"),d.listScroll(e,c),i.get(0).lastChild.nodeValue=c.text(),t.hasClass("open")||(s=!0)),o=setTimeout(function(){t.data("filter","")},500))))},optionHover:function(){var a=$(this);a.hasClass("disabled")||a.hasClass("optgroup")||a.siblings().removeClass("active").end().addClass("active")},optionClick:function(a){a.stopPropagation();var t=$(this),e=t.closest(".sod_select"),s=t.hasClass("disabled"),o=t.hasClass("optgroup"),d=e.find(".sod_option:not('.optgroup')").index(this);e.hasClass("touch")||(s||o||(e.find(".selected, .sod_placeholder").removeClass("selected sod_placeholder"),t.addClass("selected"),e.find("select option")[d].selected=!0,e.find("select").change()),clearTimeout(l),e.removeClass("open"))},selectChange:function(){var a=$(this),t=a.find(":selected"),s=t.text(),o=a.closest(".sod_select");o.find(".sod_label").get(0).lastChild.nodeValue=s,o.data("label",s),e.onChange.call(this),!o.data("links")&&!t.data("link")||t.data("link-external")?(o.data("links-external")||t.data("link-external"))&&window.open(t.val(),"_blank"):window.location.href=t.val()},blurSod:function(a){if($("body").find(a).length){var t=a.data("label"),e=a.data("placeholder"),o=a.find(".active"),d=a.find(".selected"),i=!1;clearTimeout(l),s&&!o.hasClass("selected")?(o.click(),i=!0):o.hasClass("selected")||(o.removeClass("active"),d.addClass("active")),!i&&e?a.find(".sod_label").get(0).lastChild.nodeValue=d.text():i||(a.find(".sod_label").get(0).lastChild.nodeValue=t),s=!1,a.removeClass("open focus"),a.blur(),$("html").off(".sodBlur")}},checkViewport:function(a,t){var e=a[0].getBoundingClientRect(),s=t.outerHeight();e.bottom+s+10>$(window).height()&&e.top-s>10?a.addClass("above"):a.removeClass("above"),l=setTimeout(function(){d.checkViewport(a,t)},200)},listScroll:function(a,t){var e=a[0].getBoundingClientRect(),s=t[0].getBoundingClientRect();e.top>s.top?a.scrollTop(a.scrollTop()-e.top+s.top):e.bottom<s.bottom&&a.scrollTop(a.scrollTop()-e.bottom+s.bottom)},isTouch:function(){return"ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0}},i={destroy:function(){return this.each(function(){var a=$(this),t=a.parent();t.hasClass("sod_select")&&(a.off("change"),t.find("span").remove(),a.unwrap())})},update:function(){return this.each(function(){var a=$(this),t=a.parent(),e=t.find(".sod_list:first");t.hasClass("sod_select")&&(e.empty(),t.find(".sod_label").get(0).lastChild.nodeValue="",a.is(":disabled")&&t.addClass("disabled"),$("option, optgroup",a).each(function(){d.populateSoD($(this),e,t)}))})},disable:function(a){return this.each(function(){var t=$(this),e=t.parent();e.hasClass("sod_select")&&("undefined"!=typeof a?(e.find(".sod_list:first .sod_option[data-value='"+a+"']").addClass("disabled"),e.find(".sod_list:first .sod_option[data-label='"+a+"']").nextUntil(":not(.groupchild)").addClass("disabled"),$("option[value='"+a+"'], optgroup[label='"+a+"']",this).prop("disabled",!0)):e.hasClass("sod_select")&&(e.addClass("disabled"),t.prop("disabled",!0)))})},enable:function(a){return this.each(function(){var t=$(this),e=t.parent();e.hasClass("sod_select")&&("undefined"!=typeof a?(e.find(".sod_list:first .sod_option[data-value='"+a+"']").removeClass("disabled"),e.find(".sod_list:first .sod_option[data-label='"+a+"']").nextUntil(":not(.groupchild)").removeClass("disabled"),$("option[value='"+a+"'], optgroup[label='"+a+"']",this).prop("disabled",!1)):e.hasClass("sod_select")&&(e.removeClass("disabled"),t.prop("disabled",!1)))})}};return i[a]?i[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof a&&a?void $.error('Select or Die: Oh no! No such method "'+a+'" for the SoD instance'):d.initSoD.apply(this,arguments)}}(jQuery);